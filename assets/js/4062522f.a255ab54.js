"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[5928],{3905:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>m});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=n.createContext({}),p=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):s(s({},t),e)),a},c=function(e){var t=p(e.components);return n.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),d=p(a),m=r,f=d["".concat(l,".").concat(m)]||d[m]||u[m]||o;return a?n.createElement(f,s(s({ref:t},c),{},{components:a})):n.createElement(f,s({ref:t},c))}));function m(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,s=new Array(o);s[0]=d;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:r,s[1]=i;for(var p=2;p<o;p++)s[p]=a[p];return n.createElement.apply(null,s)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},20737:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>u,frontMatter:()=>o,metadata:()=>i,toc:()=>p});var n=a(87462),r=(a(67294),a(3905));const o={sidebar_position:1},s="Wrapping State",i={unversionedId:"Advanced/Wrapping State",id:"Advanced/Wrapping State",title:"Wrapping State",description:"Sometimes, we often want to \"wrap\" events in the form of state objects. Most notably to wrap a Humanoid's HealthChanged to have an updated health state object. Of course, such a need is always common in partially-managed vinum data model, so usually you wouldn't need to use this if you have a completely-managed vinum data model.",source:"@site/docs/Advanced/Wrapping State.md",sourceDirName:"Advanced",slug:"/Advanced/Wrapping State",permalink:"/Vinum/docs/Advanced/Wrapping State",draft:!1,editUrl:"https://github.com/Plothan/Vinum/edit/master/docs/Advanced/Wrapping State.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"defaultSidebar",previous:{title:"Reflecting State",permalink:"/Vinum/docs/Intermediate/Reflecting State"},next:{title:"Grouping State",permalink:"/Vinum/docs/Advanced/Grouping State"}},l={},p=[{value:"Usage",id:"usage",level:2}],c={toc:p};function u(e){let{components:t,...a}=e;return(0,r.kt)("wrapper",(0,n.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"wrapping-state"},"Wrapping State"),(0,r.kt)("p",null,'Sometimes, we often want to "wrap" events in the form of state objects. Most notably to wrap a Humanoid\'s ',(0,r.kt)("inlineCode",{parentName:"p"},"HealthChanged")," to have an updated health state object. Of course, such a need is always common in partially-managed vinum data model, so usually you wouldn't need to use this if you have a completely-managed vinum data model."),(0,r.kt)("h2",{id:"usage"},"Usage"),(0,r.kt)("p",null,"In order to use Wrap, we must first import its constructor:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-lua"},"local Wrap = Vinum.Wrap\n")),(0,r.kt)("p",null,"Now, to use Wrap, we pass its constructor a signal ",(0,r.kt)("em",{parentName:"p"},"(that is either RBXScriptSignal or a custom one)"),", and the number of the signal's arguments it will wrap, and the default values for those:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-lua"},"local timeState, deltaState = Wrap(RunService.Stepped, 2, 0, 0)\n")),(0,r.kt)("p",null,"As you can see, Wrap doesn't create a fixed amount of state objects, instead, it creates a number of state objects that matches your second argument, which in our case is ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("em",{parentName:"strong"},"two state objects")),". These two state objects represent the two arguemnts we are wrapping, the first one is for the first argument, and so on."),(0,r.kt)("p",null,"After the second parameter you pass in, you can pass the default values for the said state objects. The ",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("em",{parentName:"strong"},"order of the default values is important")),", wich means that the first zero in our example will be timeState's default value, while the second one is deltaState's one."),(0,r.kt)("p",null,"Now to read from our wrap objects, we can use their ",(0,r.kt)("inlineCode",{parentName:"p"},"get")," method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-lua"},"print(timeState:get(), deltaState:get()) -- time run service has been running for + delta time\n")),(0,r.kt)("p",null,"Once we don't need our Wraps anymore, we can call their disconnect method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-lua"},"timeState:disconnect()\ndeltaState:disconnect()\n-- any changes will not be listened to\n")),(0,r.kt)("hr",null))}u.isMDXComponent=!0}}]);