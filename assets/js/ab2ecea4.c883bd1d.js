"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[6579],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>p});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var i=a.createContext({}),u=function(e){var t=a.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},c=function(e){var t=u(e.components);return a.createElement(i.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,i=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),m=u(n),p=r,h=m["".concat(i,".").concat(p)]||m[p]||d[p]||o;return n?a.createElement(h,l(l({ref:t},c),{},{components:n})):a.createElement(h,l({ref:t},c))}));function p(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,l=new Array(o);l[0]=m;var s={};for(var i in t)hasOwnProperty.call(t,i)&&(s[i]=t[i]);s.originalType=e,s.mdxType="string"==typeof e?e:r,l[1]=s;for(var u=2;u<o;u++)l[u]=n[u];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},4830:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>i,contentTitle:()=>l,default:()=>d,frontMatter:()=>o,metadata:()=>s,toc:()=>u});var a=n(87462),r=(n(67294),n(3905));const o={sidebar_position:1},l="Matching State",s={unversionedId:"Intermediate/Matching State",id:"Intermediate/Matching State",title:"Matching State",description:"Sometimes, you need to switch to certain computations depending on another object's value. The responsible object for this is Match. Additionally, they are also equiped with the same injectors that Calc is equiped with- so you can use the matches the same as calcs to an extent.",source:"@site/docs/Intermediate/Matching State.md",sourceDirName:"Intermediate",slug:"/Intermediate/Matching State",permalink:"/Vinum/docs/Intermediate/Matching State",draft:!1,editUrl:"https://github.com/Plothan/Vinum/edit/master/docs/Intermediate/Matching State.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"defaultSidebar",previous:{title:"Processors",permalink:"/Vinum/docs/Basics/Processors"},next:{title:"Mirroring State",permalink:"/Vinum/docs/Intermediate/Mirroring State"}},i={},u=[{value:"Usage",id:"usage",level:2},{value:"Why Matches",id:"why-matches",level:2}],c={toc:u};function d(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"matching-state"},"Matching State"),(0,r.kt)("p",null,"Sometimes, you need to switch to certain computations depending on another object's value. The responsible object for this is ",(0,r.kt)("inlineCode",{parentName:"p"},"Match"),". Additionally, they are also equiped with the same injectors that Calc is equiped with- so you can use the matches the same as calcs to an extent."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-lua"},'local Holder = Hold(100, Vinum.AlwaysTrue)\nlocal Matcher = Match(Holder, {\n    [100] = function(useState, useKeyState)\n        return true\n    end,\n    ["default"] = function(useState, useKeyState)\n        return false\n    end,\n}, function(oldValue, newValue)\n    return true\nend)\n\nprint(Matcher:get()) -- true\n')),(0,r.kt)("h2",{id:"usage"},"Usage"),(0,r.kt)("p",null,"To use Match, we first have to import it:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-lua"},"local Match = Vinum.Match\n")),(0,r.kt)("p",null,"Now to create a Match object, we pass to its constructor an input state, a list of cases, and a stateful processors ",(0,r.kt)("em",{parentName:"p"},"(see ",(0,r.kt)("a",{parentName:"em",href:"/Vinum/docs/Basics/Processors"},"Processors"),")"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-lua"},'local Holder = Hold(true, Vinum.AlwaysTrue)\nlocal Matcher = Match(Holder, {\n    [true] = function(useState, useKeyState)\n        return 100\n    end,\n    ["default"] = function(useState, useKeyState)\n        return 0\n    end\n}, Vinum.RefuseIfSimilar)\n')),(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"The ",(0,r.kt)("inlineCode",{parentName:"p"},"default")," key has to be present in every Match usage- otherwise, it can error.")),(0,r.kt)("p",null,"And now, to read from this Match, we use its ",(0,r.kt)("inlineCode",{parentName:"p"},"get")," method:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-lua"},"print(Matcher:get()) -- 100\n")),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"why-matches"},"Why Matches"),(0,r.kt)("p",null,"It is very possible to implement Matches using Calcs, however there are dozens of issues that will appear as we continue reinventing Matches using Calcs, and we can illustrate them using an example like this:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-lua"},"local root = Hold(true, Vinum.AlwaysTrue)\nlocal matchUsingCalc = Calc(function(useState, useKeyState)\n    local rootValue = useState(root)\n\n    if rootValue == true then\n        return 100\n    else\n        return 0\n    end\nend, Vinum.AlwaysTrue)\n")),(0,r.kt)("p",null,"This example pretty simple, however, what if we were to add dependencies and more cases to this example- something like this:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-lua"},"local firstValue = Hold(213123, Vinum.AlwaysTrue)\nlocal secondValue = Hold(4234, Vinum.AlwaysTrue)\nlocal root = Hold(1, Vinum.AlwaysTrue)\nlocal matchUsingCalc = Calc(function(useState, useKeyState)\n    local rootValue = useState(root)\n\n    if rootValue == 1 then\n        return 1 * (useState(firstValue) * useState(secondValue))\n    elseif rootValue == 2 then\n        return 2 * (useState(firstValue) * useState(secondValue))\n    elseif rootValue == 3 then\n        return 3 * (useState(firstValue) * useState(secondValue))\n    else\n        return 1 * (useState(firstValue) + useState(secondValue))\n    end\nend, Vinum.AlwaysTrue)\n")),(0,r.kt)("p",null,"There are a few issues with this:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Not O(1) - This means that our code will be spend much more time searching for the right value to return/compute."),(0,r.kt)("li",{parentName:"ul"},"to human & logical bugs"),(0,r.kt)("li",{parentName:"ul"},"Our code will become very messy when we add more dependencies"),(0,r.kt)("li",{parentName:"ul"},"Sometimes we have specific-case code and we want that to be properly saparated from the main handler.")),(0,r.kt)("p",null,"Using Matches, these are greatly fixed:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-lua"},'local firstValue = Hold(213123, Vinum.AlwaysTrue)\nlocal secondValue = Hold(4234, Vinum.AlwaysTrue)\nlocal root = Hold(1, Vinum.AlwaysTrue)\n\nlocal matcher = Match(root, {\n    [1] = function(useState)\n        return 1 * (useState(firstValue) * useState(secondValue))\n    end,\n    [2] = function(useState)\n        return 2 * (useState(firstValue) * useState(secondValue))\n    end,\n    [3] = function(useState)\n        return 3 * (useState(firstValue) * useState(secondValue))\n    end,\n    ["default"] = function(useState)\n        return 0 + (useState(firstValue) + useState(secondValue))\n    end\n}, Vinum.AlwaysTrue)\n')),(0,r.kt)("p",null,"Now, all the issues are fixed:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Constant Case Search - Case searching in Matches is blazingly fast since its complexity is O(2) worst case, and best case O(1)."),(0,r.kt)("li",{parentName:"ul"},"Match manages all the stuff for you"),(0,r.kt)("li",{parentName:"ul"},"Our code is more readable"),(0,r.kt)("li",{parentName:"ul"},"Each case-specific code is in its own function- making removing them a lot more easier")),(0,r.kt)("p",null,"Sometimes, we want to directly return state object's value in all cases, and while Matches are a decent tool for that, Vinum offers a more specialized tool for that, which is ",(0,r.kt)("inlineCode",{parentName:"p"},"Mirror"),"- an object that you will be introduced to in the next section."))}d.isMDXComponent=!0}}]);